import{_ as g,a as r,o,c as u,b as t,w as c,v as p,t as b,r as _,F as f,d as B,e as x,n as w,h as v,p as y,i as I}from"./index.a41ca7f5.js";const L={name:"BuildingsListItem",props:["building"],data:function(){return{name:""}},created:async function(){this.name=this.building.name},methods:{async renameBuilding(){let e=(await r.post("/api/buildings/",{id:this.building.id,name:this.name,address:this.building.address},{auth:{username:"admin",password:"pass"}})).data;this.$emit("building-updated",e)},async deleteWindow(){await r.delete("/api/buildings/"+this.building.id,{auth:{username:"admin",password:"pass"}}),this.$emit("building-deleted",this.building)}}},$={class:"border rounded p-3 m-4 w-60 h-36"},k={class:"flex flex-col justify-between items-center h-full"},D={class:"text-lg p-3"};function V(s,e,a,m,l,i){return o(),u("div",$,[t("span",{class:"absolute cursor-pointer -left-2 -top-2 bg-red-600 rounded-3xl w-6 h-6 text-white text-center z-10",onClick:e[0]||(e[0]=(...d)=>i.deleteWindow&&i.deleteWindow(...d))}," \u2716 "),t("div",k,[c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>s.name=d),id:"name",class:"bg-transparent text-center font-bold text-xl px-2 m-1 w-full",size:"1",onBlur:e[2]||(e[2]=(...d)=>i.renameBuilding&&i.renameBuilding(...d))},null,544),[[p,s.name]]),t("div",D,b(a.building.address),1)])])}const A=g(L,[["render",V]]);const U={components:{BuildingsListItem:A},name:"BuildingsList",data:function(){return{fetched:!1,buildings:[]}},created:async function(){let e=(await r.get("http://liam-latour.cleverapps.io/api/buildings",{auth:{username:"admin",password:"pass"}})).data;this.buildings=e,this.fetched=!0},methods:{updateBuilding(s){let e=this.buildings.findIndex(a=>a.id===s.id);this.buildings.splice(e,1,s)},addBuilding(s){this.buildings.push(s)},deleteBuilding(s){let e=this.buildings.findIndex(a=>a.id===s.id);this.buildings.splice(e,1)}}},z={class:"flex flex-wrap items-center justify-around pt-3"},C={key:0,class:"lds-dual-ring"};function N(s,e,a,m,l,i){const d=_("buildings-list-item");return o(),u("div",z,[s.fetched?(o(!0),u(f,{key:1},B(s.buildings,n=>(o(),x(d,{building:n,key:n.id,onBuildingUpdated:i.updateBuilding,onBuildingDeleted:i.deleteBuilding},null,8,["building","onBuildingUpdated","onBuildingDeleted"]))),128)):(o(),u("div",C))])}const S=g(U,[["render",N],["__scopeId","data-v-251ef57c"]]);const W={components:{BuildingsList:S},name:"BuildingsView",data(){return{name:"",address:""}},computed:{cantAddBuilding:function(){return this.name==""||this.address==""}},methods:{async addBuilding(){let e=(await r.post("http://liam-latour.cleverapps.io/api/buildings/",{name:this.name,address:this.address},{auth:{username:"admin",password:"pass"}})).data;this.$refs.buildingsList.addBuilding(e)}}},h=s=>(y("data-v-e75213e2"),s=s(),I(),s),j={class:"flex h-full"},F={class:"flex flex-col bg-zinc-900 px-7 py-3 shadow-lg shrink min-w-0"},T=h(()=>t("label",{class:"text-center font-semibold text-xl mb-2"}," ADD A BUILDING ",-1)),E={class:"m-auto mt-1 max-w-5xl"},G=h(()=>t("h1",{class:"text-center text-5xl m-7"},"Buildings",-1));function M(s,e,a,m,l,i){const d=_("BuildingsList");return o(),u("div",j,[t("form",F,[T,c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>l.name=n),id:"name",placeholder:"Building Name",class:"p-3 rounded m-2 bg-transparent border font-bold text-base h-12"},null,512),[[p,l.name]]),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>l.address=n),id:"address",placeholder:"Building Address",class:"p-3 rounded m-2 bg-transparent border font-bold text-base h-12"},null,512),[[p,l.address]]),t("a",{href:"#",onClick:e[2]||(e[2]=(...n)=>i.addBuilding&&i.addBuilding(...n)),class:w(["bg-green-500 rounded p-3 m-2 text-center text-white font-bold",{disabled:i.cantAddBuilding}])}," ADD IT ",2)]),t("div",E,[G,v(d,{ref:"buildingsList"},null,512)])])}const H=g(W,[["render",M],["__scopeId","data-v-e75213e2"]]);export{H as default};
