import{_ as g,a as r,o as u,c as o,b as d,w as c,v as p,t as f,r as _,F as b,d as B,e as x,n as w,h as v,p as y,i as I}from"./index.049b3ceb.js";const L={name:"BuildingsListItem",props:["building"],data:function(){return{name:""}},created:async function(){this.name=this.building.name},methods:{async renameBuilding(){let e=(await r.post("/api/buildings/",{id:this.building.id,name:this.name,address:this.building.address},{auth:{username:"admin",password:"pass"}})).data;this.$emit("building-updated",e)},async deleteWindow(){await r.delete("/api/buildings/"+this.building.id,{auth:{username:"admin",password:"pass"}}),this.$emit("building-deleted",this.building)}}},$={class:"border rounded p-3 m-4 w-60 h-36"},k={class:"flex flex-col justify-between items-center h-full"},D={class:"text-lg p-3"};function V(s,e,a,m,l,i){return u(),o("div",$,[d("span",{class:"absolute cursor-pointer -left-2 -top-2 bg-red-600 rounded-3xl w-6 h-6 text-white text-center z-10",onClick:e[0]||(e[0]=(...n)=>i.deleteWindow&&i.deleteWindow(...n))}," \u2716 "),d("div",k,[c(d("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>s.name=n),id:"name",class:"bg-transparent text-center font-bold text-xl px-2 m-1 w-full",size:"1",onBlur:e[2]||(e[2]=(...n)=>i.renameBuilding&&i.renameBuilding(...n))},null,544),[[p,s.name]]),d("div",D,f(a.building.address),1)])])}const A=g(L,[["render",V]]);const U={components:{BuildingsListItem:A},name:"BuildingsList",data:function(){return{fetched:!1,buildings:[]}},created:async function(){let e=(await r.get("/api/buildings",{auth:{username:"admin",password:"pass"}})).data;this.buildings=e,this.fetched=!0},methods:{updateBuilding(s){let e=this.buildings.findIndex(a=>a.id===s.id);this.buildings.splice(e,1,s)},addBuilding(s){this.buildings.push(s)},deleteBuilding(s){let e=this.buildings.findIndex(a=>a.id===s.id);this.buildings.splice(e,1)}}},z={class:"flex flex-wrap items-center justify-around pt-3"},C={key:0,class:"lds-dual-ring"};function N(s,e,a,m,l,i){const n=_("buildings-list-item");return u(),o("div",z,[s.fetched?(u(!0),o(b,{key:1},B(s.buildings,t=>(u(),x(n,{building:t,key:t.id,onBuildingUpdated:i.updateBuilding,onBuildingDeleted:i.deleteBuilding},null,8,["building","onBuildingUpdated","onBuildingDeleted"]))),128)):(u(),o("div",C))])}const S=g(U,[["render",N],["__scopeId","data-v-0feaa06d"]]);const W={components:{BuildingsList:S},name:"BuildingsView",data(){return{name:"",address:""}},computed:{cantAddBuilding:function(){return this.name==""||this.address==""}},methods:{async addBuilding(){let e=(await r.post("/api/buildings/",{name:this.name,address:this.address},{auth:{username:"admin",password:"pass"}})).data;this.$refs.buildingsList.addBuilding(e)}}},h=s=>(y("data-v-dfe45a0c"),s=s(),I(),s),j={class:"flex h-full"},F={class:"flex flex-col bg-zinc-900 px-7 py-3 shadow-lg shrink min-w-0"},T=h(()=>d("label",{class:"text-center font-semibold text-xl mb-2"}," ADD A BUILDING ",-1)),E={class:"m-auto mt-1 max-w-5xl"},G=h(()=>d("h1",{class:"text-center text-5xl m-7"},"Buildings",-1));function M(s,e,a,m,l,i){const n=_("BuildingsList");return u(),o("div",j,[d("form",F,[T,c(d("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.name=t),id:"name",placeholder:"Building Name",class:"p-3 rounded m-2 bg-transparent border font-bold text-base h-12"},null,512),[[p,l.name]]),c(d("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.address=t),id:"address",placeholder:"Building Address",class:"p-3 rounded m-2 bg-transparent border font-bold text-base h-12"},null,512),[[p,l.address]]),d("a",{href:"#",onClick:e[2]||(e[2]=(...t)=>i.addBuilding&&i.addBuilding(...t)),class:w(["bg-green-500 rounded p-3 m-2 text-center text-white font-bold",{disabled:i.cantAddBuilding}])}," ADD IT ",2)]),d("div",E,[G,v(n,{ref:"buildingsList"},null,512)])])}const H=g(W,[["render",M],["__scopeId","data-v-dfe45a0c"]]);export{H as default};
