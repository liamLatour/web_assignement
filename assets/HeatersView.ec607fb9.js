import{_,a as c,o as n,c as o,b as t,w as h,v as u,t as m,n as b,r as x,F as w,d as H,e as v,f as y,g,h as k,p as I,i as L}from"./index.6de3b1a4.js";const O={name:"HeatersListItem",props:["heater"],data:function(){return{name:""}},created:async function(){this.name=this.heater.name},computed:{isHeaterOn:function(){return this.heater.heaterStatus==="ON"}},methods:{async renameHeater(){let e=(await c.post("/api/heaters/",{id:this.heater.id,name:this.name,heaterStatus:this.heater.heaterStatus,power:this.heater.power,roomId:this.heater.roomId,roomName:this.heater.roomName},{auth:{username:"admin",password:"pass"}})).data;this.$emit("heater-updated",e)},async switchHeater(){let e=(await c.put("/api/heaters/"+this.heater.id+"/switch",{auth:{username:"admin",password:"pass"}})).data;this.$emit("heater-updated",e)},async deleteHeater(){await c.delete("/api/heaters/"+this.heater.id,{auth:{username:"admin",password:"pass"}}),this.$emit("heater-deleted",this.heater)}}},S={class:"border rounded p-3 m-4 w-48"},V={class:"flex flex-col justify-center items-center"},C={class:"text-base"},D={key:0,class:"text-lg"},N={key:1,class:"text-lg"},A={class:"flex items-center justify-around"},B={class:"inline p-3 pb-1"},U={key:0,class:"font-bold text-base"},z={key:1,class:"font-bold text-base"};function $(s,e,l,f,d,r){return n(),o("div",S,[t("span",{class:"absolute cursor-pointer -left-2 -top-2 bg-red-600 rounded-3xl w-6 h-6 text-white text-center z-10",onClick:e[0]||(e[0]=(...i)=>r.deleteHeater&&r.deleteHeater(...i))}," \u2716 "),t("div",V,[h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>s.name=i),id:"name",class:"bg-transparent text-center font-bold text-xl px-2 m-1 w-full",size:"1",onBlur:e[2]||(e[2]=(...i)=>r.renameHeater&&r.renameHeater(...i))},null,544),[[u,s.name]]),t("div",C,m(l.heater.heaterName),1),l.heater.power?(n(),o("div",D,"Power: "+m(l.heater.power),1)):(n(),o("div",N,"-")),t("div",A,[t("label",{class:"switch h-6",onClick:e[3]||(e[3]=(...i)=>r.switchHeater&&r.switchHeater(...i))},[t("span",{class:b(["slider",{checked:r.isHeaterOn}])},null,2)]),t("div",B,[r.isHeaterOn?(n(),o("label",U," On ")):(n(),o("label",z," Off "))])])])])}const j=_(O,[["render",$],["__scopeId","data-v-a52ffbd9"]]);const F={components:{HeatersListItem:j},name:"HeatersList",data:function(){return{fetched:!1,heaters:[]}},created:async function(){let e=(await c.get("/api/heaters",{auth:{username:"admin",password:"pass"}})).data;this.heaters=e,this.fetched=!0},methods:{updateHeater(s){let e=this.heaters.findIndex(l=>l.id===s.id);this.heaters.splice(e,1,s)},addHeater(s){this.heaters.push(s)},deleteHeater(s){let e=this.heaters.findIndex(l=>l.id===s.id);this.heaters.splice(e,1)}}},E={class:"flex flex-wrap items-center justify-around pt-3"},M={key:0,class:"lds-dual-ring"};function T(s,e,l,f,d,r){const i=x("heaters-list-item");return n(),o("div",E,[s.fetched?(n(!0),o(w,{key:1},H(s.heaters,a=>(n(),v(i,{heater:a,key:a.id,onHeaterUpdated:r.updateHeater,onHeaterDeleted:r.deleteHeater},null,8,["heater","onHeaterUpdated","onHeaterDeleted"]))),128)):(n(),o("div",M))])}const P=_(F,[["render",T],["__scopeId","data-v-871755b4"]]);const R={components:{HeatersList:P},name:"HeatersView",data(){return{name:"",room:"",power:null,status:!1,rooms:["A","BB","CCC"]}},computed:{cantAddHeater:function(){return this.name==""||this.room==""}},created:async function(){let e=(await c.get("/api/rooms",{auth:{username:"admin",password:"pass"}})).data;this.rooms=e},methods:{async addHeater(){console.log(this.power);let e=(await c.post("/api/heaters/",{name:this.name,roomId:this.room,power:this.power,heaterStatus:this.status?"ON":"OFF"},{auth:{username:"admin",password:"pass"}})).data;this.$refs.heatersList.addHeater(e)}}},p=s=>(I("data-v-ae012a63"),s=s(),L(),s),q={class:"flex h-full"},G={class:"flex flex-col bg-zinc-900 px-7 py-3 shadow-lg shrink min-w-0"},J=p(()=>t("label",{class:"text-center font-semibold text-xl mb-2"}," ADD A HEATER ",-1)),K=p(()=>t("option",{class:"bg-zinc-900",value:"",disabled:"",selected:""}," Select a Room ",-1)),Q=["value"],W={class:"py-3 m-2 h-12 flex items-center justify-between"},X={class:"switch"},Y=p(()=>t("span",{class:"slider"},null,-1)),Z={class:"inline p-3"},ee={key:0,class:"font-bold text-base",for:"status"},te={key:1,class:"font-bold text-base",for:"status"},se={class:"m-auto mt-1 max-w-5xl"},ae=p(()=>t("h1",{class:"text-center text-5xl m-7"},"Heaters",-1));function re(s,e,l,f,d,r){const i=x("HeatersList");return n(),o("div",q,[t("form",G,[J,h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>d.name=a),id:"name",placeholder:"Heater Name",class:"p-3 rounded m-2 bg-transparent border font-bold text-base h-12"},null,512),[[u,d.name]]),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.room=a),id:"room",class:"p-3 rounded m-2 bg-transparent border font-bold text-base h-12"},[K,(n(!0),o(w,null,H(d.rooms,a=>(n(),o("option",{class:"bg-zinc-900",key:a.id,value:a.id},m(a.name),9,Q))),128))],512),[[y,d.room]]),h(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>d.power=a),id:"power",type:"number",placeholder:"Heater Power",class:"p-3 rounded m-2 bg-transparent border font-bold text-base h-12"},null,512),[[u,d.power]]),t("div",W,[t("div",null,[t("label",X,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>d.status=a)},null,512),[[g,d.status]]),Y]),t("div",Z,[d.status?(n(),o("label",ee," On ")):(n(),o("label",te," Off "))])]),t("a",{href:"#",onClick:e[4]||(e[4]=(...a)=>r.addHeater&&r.addHeater(...a)),class:b(["bg-green-500 rounded p-3 text-white font-bold",{disabled:r.cantAddHeater}])}," ADD IT ",2)])]),t("div",se,[ae,k(i,{ref:"heatersList"},null,512)])])}const oe=_(R,[["render",re],["__scopeId","data-v-ae012a63"]]);export{oe as default};
